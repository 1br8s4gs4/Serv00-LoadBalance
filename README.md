仅供测试！！！仅供测试！！！仅供测试！！！

# Cloudflare Workers 负载均衡器

该项目实现了一个基于 Cloudflare Workers 的负载均衡器，支持通过 IP 哈希算法进行服务器选择，并结合缓存机制、优先使用上次成功的服务器以及指数退避策略来优化性能和稳定性。

# 使用说明

使用Workers/Pages连接Github 的方法部署均可
绑定自定义域后，使用这个自定义域代替伪装域名和SNI

## 功能

- **负载均衡**：基于客户端 IP 地址的哈希值选择服务器。
- **上次成功服务器优先**：优先使用上次成功响应的服务器，以减少不必要的请求。
- **超时控制**：设置请求超时，避免长时间等待。
- **缓存机制**：缓存成功响应，减少重复请求。
- **重试策略**：实现指数退避重试策略，优化失败处理。

## 配置

1. **环境变量**：

   - SERVERS：必填，域名列表，每行一个地址。例如：
     ```
     s4argo.google.com
     s5argo.google.com
     s6argo.google.com
     ```

   - MAX_RETRY：可不填，最大重试次数。默认为 `2`。
     - **作用**：设置在服务器失败时的最大重试次数。如果未设置此变量，将使用默认值 `2`。此变量用于限制当请求失败时最大轮询次数，避免无限循环尝试。

   - TIMEOUT：可不填，请求超时（毫秒）。默认为 `5000` 毫秒（5秒）。
     - **作用**：设置请求超时的时间。如果未设置此变量，将使用默认值 `5000` 毫秒。此变量控制每次请求等待的最长时间，防止请求被挂起过久。

## 使用

将此 Workers 部署到你的 Cloudflare 账户中，并将你的域名或子域名配置为使用该 Workers 脚本。所有到达 Workers 的请求将通过负载均衡器进行处理和转发。

## 许可

本项目采用 [MIT 许可](LICENSE)，你可以自由使用、修改和分发。
